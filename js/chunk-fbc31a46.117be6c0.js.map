{"version":3,"sources":["webpack:///./src/views/new-music/components/NewSongList.vue?f1e0","webpack:///./src/views/new-music/Index.vue?db92","webpack:///./src/views/new-music/Index.vue","webpack:///./src/api/new-music/convert.ts","webpack:///./src/api/new-music/index.ts","webpack:///./src/views/new-music/components/NewSongList.vue","webpack:///./src/views/new-music/components/NewSongList.vue?66e5","webpack:///./src/views/new-music/components/NewSongList.vue?a8bd","webpack:///./src/views/new-music/Index.vue?250d","webpack:///./src/views/new-music/Index.vue?889b"],"names":["class","newMusicCategories","item","value","currentCategory","key","handleChangeCategory","label","topSongs","isLoading","res","data","length","map","album","artists","duration","alias","id","name","picUrl","mvId","mvid","durationStr","sq","status","REQUEST_URL","category","type","then","className","style","song","index","handlePlaySong","padStart","src","alt","handleShowMvDetail","artist","props","Array","default","setup","player","changeCurrentSongQueue","changeCurrentIndex","router","changePlayStatus","push","render","__scopeId","components","NewSongList","newCat","getNewSongs"],"mappings":"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","file":"js/chunk-fbc31a46.117be6c0.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NewSongList.vue?vue&type=style&index=0&id=a4f737d0&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Index.vue?vue&type=style&index=0&id=7b87eaf7&lang=scss&scoped=true\"","<template>\n  <div class=\"new-music\" v-loading=\"isLoading\">\n    <header class=\"new-music-header\">\n      <span class=\"header-item active\">新歌速递</span>\n      <span class=\"header-item\">新碟上架</span>\n    </header>\n    <main class=\"new-music-main\">\n      <div class=\"main-top\">\n        <ul class=\"top-left\">\n          <li\n            class=\"left-item\"\n            :class=\"{ active: item.value === currentCategory }\"\n            v-for=\"item in newMusicCategories\"\n            :key=\"item.value\"\n            @click=\"handleChangeCategory(item.value)\"\n          >\n            {{ item.label }}\n          </li>\n        </ul>\n        <div class=\"top-right\">\n          <div class=\"right-item highlight\">\n            <i class=\"iconfont icon-play-double\" />\n            <span>播放全部</span>\n          </div>\n          <div class=\"right-item\">\n            <i class=\"iconfont icon-collect\" />\n            <span>收藏全部</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"main-bottom\">\n        <NewSongList :topSongs=\"topSongs\" />\n      </div>\n    </main>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref } from \"vue\";\nimport { NEW_CATEGORYS } from \"@/utils/constant\";\nimport { getTopSongsData } from \"@/api/new-music/index\";\n\nimport NewSongList from \"./components/NewSongList.vue\";\n\nexport default defineComponent({\n  components: {\n    NewSongList,\n  },\n  setup() {\n    const isLoading = ref<boolean>(false);\n    const newMusicCategories = ref<any[]>(NEW_CATEGORYS);\n    const currentCategory = ref<number>(0);\n    const topSongs = ref<Song[]>([]);\n\n    const handleChangeCategory = (newCat: number) => {\n      currentCategory.value = newCat;\n      getNewSongs();\n    };\n\n    const getNewSongs = async () => {\n      isLoading.value = true;\n      topSongs.value = await getTopSongsData(currentCategory.value);\n      isLoading.value = false;\n    };\n\n    onMounted(() => getNewSongs());\n\n    return {\n      isLoading,\n      newMusicCategories,\n      currentCategory,\n      topSongs,\n      handleChangeCategory,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.new-music {\n  .new-music-header {\n    display: flex;\n    justify-content: center;\n    width: 232px;\n    margin: 0 auto;\n    border: 1px solid #bbb;\n    border-radius: 20px;\n\n    .header-item {\n      padding: 8px 32px;\n      font-size: 13px;\n      font-weight: 300;\n      cursor: pointer;\n      border-radius: 20px;\n\n      &.active {\n        background: #bbb;\n        color: #fff;\n        font-weight: normal;\n      }\n    }\n  }\n\n  .new-music-main {\n    margin: 20px 0;\n\n    .main-top {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin: 10px 0;\n\n      .top-left {\n        display: flex;\n        align-items: center;\n        color: #666;\n\n        .left-item {\n          margin-right: 20px;\n          cursor: pointer;\n\n          &:hover {\n            color: #333;\n          }\n\n          &.active {\n            font-weight: bold;\n            color: #333;\n          }\n        }\n      }\n\n      .top-right {\n        display: flex;\n        align-items: center;\n\n        .right-item {\n          display: flex;\n          align-items: center;\n          padding: 3px 10px;\n          margin-left: 10px;\n          font-size: 13px;\n          border: 1px solid #ccc;\n          border-radius: 20px;\n          cursor: pointer;\n\n          .iconfont {\n            margin-right: 4px;\n            font-size: 18px;\n            color: #333;\n          }\n\n          &.highlight {\n            background: $active-color;\n            color: #fff;\n            border: none;\n\n            .iconfont {\n              color: #fff;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import { formatDuration } from \"@/utils/utils\";\nimport { AxiosResponse } from \"axios\";\n\nexport const convertTopSongs = (res: AxiosResponse) => {\n  const { data } = res.data;\n  if (!data || !data.length) return;\n\n  return data.map((item: any) => {\n    const { album, artists, duration, alias } = item;\n\n    return {\n      id: item.id,\n      name: item.name,\n      picUrl: album.picUrl,\n      alias: alias[0] || \"\",\n      mvId: item.mvid,\n      album: { id: album.id, name: album.name },\n      artists: artists.map((item: Artist) => ({\n        id: item.id,\n        name: item.name,\n      })),\n      duration: duration,\n      durationStr: formatDuration(duration),\n      sq: album.status === 0,\n    };\n  });\n};\n","import { getRequest } from \"../request\";\nimport { convertTopSongs } from \"./convert\";\n\nconst REQUEST_URL = {\n  topSongs: \"/top/song\",\n};\n\nexport const getTopSongsData = (category: number) => {\n  return getRequest(REQUEST_URL.topSongs, { type: category }).then(\n    convertTopSongs\n  );\n};\n","<template>\n  <div\n    class=\"music-item\"\n    v-for=\"(song, index) in topSongs\"\n    :key=\"song.id\"\n    @dblclick=\"handlePlaySong(index)\"\n  >\n    <span class=\"music-index\">{{ (index + 1 + \"\").padStart(2, \"0\") }}</span>\n    <div class=\"music-img\">\n      <img :src=\"song.picUrl\" alt=\"\" />\n      <div class=\"img-decorate\">\n        <i className=\"iconfont icon-play\" />\n      </div>\n    </div>\n    <div class=\"music-name\">\n      <div>\n        {{ song.name }}\n        <span v-if=\"song.alias\" style=\"color: #999\">\n          &nbsp;({{ song.alias }})\n        </span>\n      </div>\n      <i class=\"iconfont icon-sq\" v-if=\"song.sq\" />\n      <i\n        class=\"iconfont icon-mv\"\n        v-if=\"song.mvId\"\n        @click=\"handleShowMvDetail(song.mvId)\"\n      />\n    </div>\n    <div class=\"music-singer\">\n      <span v-for=\"(artist, index) in song.artists\" :key=\"artist.id\">\n        {{ `${artist.name}${index === song.artists.length - 1 ? \"\" : \" / \"}` }}\n      </span>\n    </div>\n    <div class=\"music-album\">{{ song.album.name }}</div>\n    <div class=\"music-duration\">{{ song.durationStr }}</div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { playerStore } from \"@/store/modules/player\";\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    topSongs: {\n      type: Array as PropType<Song[]>,\n      default: () => [],\n    },\n  },\n  setup(props) {\n    const handlePlaySong = (index: number) => {\n      playerStore.changeCurrentSongQueue(props.topSongs as Song[]);\n      playerStore.changeCurrentIndex(index);\n    };\n\n    const router = useRouter();\n    const handleShowMvDetail = (id: number) => {\n      playerStore.changePlayStatus(false);\n      router.push(`/mv/${id}`);\n    };\n\n    return {\n      handlePlaySong,\n      handleShowMvDetail,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.music-item {\n  display: flex;\n  align-items: center;\n  height: 84px;\n  color: #666;\n  font-size: 14px;\n  padding: 0 10px;\n  border-radius: 4px;\n\n  .music-index {\n    flex: 0 0 25px;\n    margin-right: 15px;\n    color: #999;\n  }\n\n  .music-img {\n    flex: 0 0 64px;\n    position: relative;\n    margin-right: 10px;\n\n    > img {\n      width: 100%;\n    }\n\n    .img-decorate {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 24px;\n      height: 24px;\n      line-height: 24px;\n      color: $primary-color;\n      text-align: center;\n      background: rgba(253, 253, 253, 0.9);\n      border-radius: 50%;\n      transform: translate(-50%, -50%);\n\n      .icon-play {\n        position: relative;\n        left: 2px;\n        font-size: 14px;\n      }\n    }\n  }\n\n  .music-name {\n    flex: 1;\n    display: flex;\n    align-items: center;\n\n    > div {\n      @include maxWidthEllipsis(300px);\n    }\n\n    .iconfont {\n      position: relative;\n      font-size: 36px;\n      top: 1px;\n      color: $primary-color;\n    }\n  }\n\n  .music-singer,\n  .music-album {\n    width: 220px;\n    height: 20px;\n    line-height: 20px;\n    margin-right: 10px;\n    flex: 0 0 auto;\n    @include maxWidthEllipsis(320px);\n  }\n\n  .music-duration {\n    flex: 0 0 50;\n    text-align: right;\n  }\n\n  &:nth-child(odd) {\n    background: #f8f8f8;\n  }\n}\n</style>\n","\nimport { playerStore } from \"@/store/modules/player\";\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    topSongs: {\n      type: Array as PropType<Song[]>,\n      default: () => [],\n    },\n  },\n  setup(props) {\n    const handlePlaySong = (index: number) => {\n      playerStore.changeCurrentSongQueue(props.topSongs as Song[]);\n      playerStore.changeCurrentIndex(index);\n    };\n\n    const router = useRouter();\n    const handleShowMvDetail = (id: number) => {\n      playerStore.changePlayStatus(false);\n      router.push(`/mv/${id}`);\n    };\n\n    return {\n      handlePlaySong,\n      handleShowMvDetail,\n    };\n  },\n});\n","import { render } from \"./NewSongList.vue?vue&type=template&id=a4f737d0&scoped=true\"\nimport script from \"./NewSongList.vue?vue&type=script&lang=ts\"\nexport * from \"./NewSongList.vue?vue&type=script&lang=ts\"\n\nimport \"./NewSongList.vue?vue&type=style&index=0&id=a4f737d0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a4f737d0\"\n\nexport default script","\nimport { defineComponent, onMounted, ref } from \"vue\";\nimport { NEW_CATEGORYS } from \"@/utils/constant\";\nimport { getTopSongsData } from \"@/api/new-music/index\";\n\nimport NewSongList from \"./components/NewSongList.vue\";\n\nexport default defineComponent({\n  components: {\n    NewSongList,\n  },\n  setup() {\n    const isLoading = ref<boolean>(false);\n    const newMusicCategories = ref<any[]>(NEW_CATEGORYS);\n    const currentCategory = ref<number>(0);\n    const topSongs = ref<Song[]>([]);\n\n    const handleChangeCategory = (newCat: number) => {\n      currentCategory.value = newCat;\n      getNewSongs();\n    };\n\n    const getNewSongs = async () => {\n      isLoading.value = true;\n      topSongs.value = await getTopSongsData(currentCategory.value);\n      isLoading.value = false;\n    };\n\n    onMounted(() => getNewSongs());\n\n    return {\n      isLoading,\n      newMusicCategories,\n      currentCategory,\n      topSongs,\n      handleChangeCategory,\n    };\n  },\n});\n","import { render } from \"./Index.vue?vue&type=template&id=7b87eaf7&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=ts\"\nexport * from \"./Index.vue?vue&type=script&lang=ts\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=7b87eaf7&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7b87eaf7\"\n\nexport default script"],"sourceRoot":""}