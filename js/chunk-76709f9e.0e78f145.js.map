{"version":3,"sources":["webpack:///./src/views/rank/components/SingerRank.vue?6715","webpack:///./src/views/rank/components/GlobalItem.vue?841e","webpack:///./src/views/rank/Index.vue","webpack:///./src/views/rank/components/OfficialItem.vue","webpack:///./src/views/rank/components/OfficialItem.vue?4547","webpack:///./src/views/rank/components/OfficialItem.vue?8777","webpack:///./src/views/rank/components/SingerRank.vue","webpack:///./src/views/rank/components/SingerRank.vue?e996","webpack:///./src/views/rank/components/SingerRank.vue?0ac2","webpack:///./src/views/rank/components/GlobalItem.vue","webpack:///./src/views/rank/components/GlobalItem.vue?6987","webpack:///./src/views/rank/components/GlobalItem.vue?df9d","webpack:///./src/api/rank/convert.ts","webpack:///./src/api/rank/index.ts","webpack:///./src/views/rank/Index.vue?3957","webpack:///./src/views/rank/Index.vue?d93e","webpack:///./src/views/rank/components/OfficialItem.vue?dc9e","webpack:///./src/views/rank/Index.vue?2bb0"],"names":["class","officialRanks","item","key","id","officialRank","Object","keys","singerRank","length","globalRanks","globalRank","isLoading","style","updateTime","src","coverImgUrl","alt","songs","index","handlePlaySong","name","artists","artist","handleShowDetail","props","type","default","setup","router","player","changeCurrentSongQueue","changeCurrentIndex","push","render","__scopeId","handleShowSingerDetail","handleShowMoreSinger","playCount","alert","res","playlist","data","tracks","track","picUrl","al","ar","map","album","duration","dt","list","ars","img1v1Url","convertRanksInfo","artistToplist","commonRanksInfo","i","backgroundImgUrl","slice","coverUrl","REQUEST_URL","rankSongs","rankSinger","ranks","then","components","OfficialItem","SingerRank","GlobalItem","rankData","init","value"],"mappings":"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","file":"js/chunk-76709f9e.0e78f145.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SingerRank.vue?vue&type=style&index=0&id=4ccd60b0&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GlobalItem.vue?vue&type=style&index=0&id=102b9f7c&lang=scss&scoped=true\"","<template>\n  <div class=\"rank\" v-loading=\"isLoading\">\n    <h1 class=\"rank-type\">官方榜</h1>\n    <div class=\"rank-official\">\n      <OfficialItem\n        v-for=\"item in officialRanks\"\n        :key=\"item.id\"\n        :officialRank=\"item\"\n      />\n      <SingerRank\n        v-if=\"Object.keys(singerRank).length\"\n        :singerRank=\"singerRank\"\n      />\n    </div>\n    <h1 class=\"rank-type\">全球榜</h1>\n    <div class=\"rank-global\">\n      <GlobalItem\n        v-for=\"item in globalRanks\"\n        :key=\"item.id\"\n        :globalRank=\"item\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, reactive, ref, toRefs } from \"vue\";\n\nimport OfficialItem from \"./components/OfficialItem.vue\";\nimport SingerRank from \"./components/SingerRank.vue\";\nimport GlobalItem from \"./components/GlobalItem.vue\";\nimport { getRanksInfo } from \"@/api/rank/index\";\n\ninterface RankInfo {\n  officialRanks: CommonRank[];\n  globalRanks: CommonRank[];\n  singerRank: SingerRank;\n}\n\nexport default defineComponent({\n  components: {\n    OfficialItem,\n    SingerRank,\n    GlobalItem,\n  },\n  setup() {\n    const isLoading = ref<boolean>(false);\n\n    const rankData = reactive<RankInfo>({\n      officialRanks: [],\n      globalRanks: [],\n      // @ts-ignore\n      singerRank: {},\n    });\n\n    const init = async () => {\n      isLoading.value = true;\n\n      const { officialRanks, globalRanks, singerRank }: any =\n        await getRanksInfo();\n      rankData.officialRanks = officialRanks;\n      rankData.globalRanks = globalRanks;\n      rankData.singerRank = singerRank;\n\n      isLoading.value = false;\n    };\n\n    onMounted(() => init());\n\n    return {\n      isLoading,\n      ...toRefs(rankData),\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.rank {\n  .rank-type {\n    height: 50px;\n    line-height: 50px;\n    font-size: 20px;\n    font-weight: bold;\n  }\n\n  .rank-global {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n}\n</style>\n","<template>\n  <div class=\"official-item\">\n    <!-- 左侧部分 -->\n    <div class=\"official-cover\">\n      <!-- 背景图 -->\n      <div\n        class=\"cover-filter\"\n        :style=\"{\n          background: `url(${officialRank.backgroundImgUrl})`,\n          backgroundSize: 'cover',\n        }\"\n      />\n      <div class=\"cover-time\">{{ officialRank.updateTime }}更新</div>\n      <img :src=\"officialRank.coverImgUrl\" alt=\"\" />\n      <!-- 鼠标悬浮图标 -->\n      <div class=\"cover-decorate\">\n        <i class=\"iconfont icon-play\" />\n      </div>\n    </div>\n    <!-- 右侧列表 -->\n    <div class=\"official-list\">\n      <div\n        class=\"list-item\"\n        v-for=\"(item, index) in officialRank.songs\"\n        :key=\"item.id\"\n        @dblclick=\"handlePlaySong(index)\"\n      >\n        <div class=\"item-left\">\n          <span class=\"left-index\" :class=\"index <= 2 ? 'top' : ''\">\n            {{ index + 1 }}\n          </span>\n          <span class=\"left-split\">-</span>\n          <span>{{ item.name }}</span>\n        </div>\n        <span class=\"item-right\">\n          <span v-for=\"(artist, index) in item.artists\" :key=\"artist.id\">\n            {{\n              `${artist.name}${index === item.artists.length - 1 ? \"\" : \" / \"}`\n            }}\n          </span>\n        </span>\n      </div>\n      <span class=\"more\" @click=\"handleShowDetail\">\n        查看全部<i class=\"iconfont icon-right\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { playerStore } from \"@/store/modules/player\";\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    officialRank: {\n      type: Object as PropType<CommonRank>,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const router = useRouter();\n\n    const handlePlaySong = (index: number) => {\n      playerStore.changeCurrentSongQueue(\n        (props.officialRank as CommonRank).songs\n      );\n      playerStore.changeCurrentIndex(index);\n    };\n    const handleShowDetail = () =>\n      router.push(`/playlist/${(props.officialRank as CommonRank).id}`);\n\n    return {\n      handlePlaySong,\n      handleShowDetail,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.official-item {\n  display: flex;\n  margin-bottom: 20px;\n\n  .official-cover {\n    position: relative;\n    width: 172px;\n    height: 172px;\n    cursor: pointer;\n    // 除去多余的模糊阴影\n    overflow: hidden;\n\n    .cover-filter {\n      width: 100%;\n      height: 100%;\n      filter: blur(2px);\n      border-radius: 4px;\n    }\n\n    .cover-time {\n      position: absolute;\n      bottom: 25%;\n      width: 100%;\n      text-align: center;\n      font-size: 12px;\n      color: #f1f2f3;\n      z-index: 2;\n    }\n\n    > img {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      border-radius: 4px;\n      opacity: 0.9;\n    }\n\n    .cover-decorate {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 36px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: $primary-color;\n      background: rgba(253, 253, 253, 0.6);\n      border-radius: 50%;\n      display: none;\n      z-index: 3;\n\n      .icon-play {\n        position: relative;\n        left: 3px;\n        font-size: 18px;\n      }\n    }\n\n    &:hover {\n      .cover-decorate {\n        display: block;\n      }\n    }\n  }\n\n  .official-list {\n    flex: 1;\n    margin-left: 40px;\n\n    .list-item {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: 34px;\n      padding: 0 10px;\n      font-size: 12px;\n      color: #444;\n      border-radius: 4px;\n\n      &:nth-child(odd) {\n        background: #f8f8f8;\n      }\n\n      &:hover {\n        background: #f1f2f3;\n      }\n\n      .left-index {\n        font-size: 14px;\n        color: #999;\n\n        &.top {\n          color: $active-color;\n        }\n      }\n\n      .left-split {\n        margin: 0 10px;\n      }\n\n      .item-right {\n        color: #999;\n      }\n    }\n\n    .more {\n      height: 34px;\n      line-height: 34px;\n      padding: 0 10px;\n      font-size: 12px;\n      font-weight: 100;\n      cursor: pointer;\n\n      .iconfont {\n        font-size: 12px;\n      }\n    }\n  }\n}\n</style>\n","\nimport { playerStore } from \"@/store/modules/player\";\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    officialRank: {\n      type: Object as PropType<CommonRank>,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const router = useRouter();\n\n    const handlePlaySong = (index: number) => {\n      playerStore.changeCurrentSongQueue(\n        (props.officialRank as CommonRank).songs\n      );\n      playerStore.changeCurrentIndex(index);\n    };\n    const handleShowDetail = () =>\n      router.push(`/playlist/${(props.officialRank as CommonRank).id}`);\n\n    return {\n      handlePlaySong,\n      handleShowDetail,\n    };\n  },\n});\n","import { render } from \"./OfficialItem.vue?vue&type=template&id=571a7058&scoped=true\"\nimport script from \"./OfficialItem.vue?vue&type=script&lang=ts\"\nexport * from \"./OfficialItem.vue?vue&type=script&lang=ts\"\n\nimport \"./OfficialItem.vue?vue&type=style&index=0&id=571a7058&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-571a7058\"\n\nexport default script","<template>\n  <div class=\"singer\">\n    <div class=\"singer-cover\">\n      <div\n        class=\"cover-filter\"\n        :style=\"{\n          background: `url(${singerRank.backgroundImgUrl})`,\n          backgroundSize: 'cover',\n        }\"\n      />\n      <div class=\"cover-time\">{{ singerRank.updateTime }}更新</div>\n      <img :src=\"singerRank.coverImgUrl\" alt=\"\" />\n\n      <div class=\"cover-decorate\">\n        <i class=\"iconfont icon-play\" />\n      </div>\n    </div>\n    <div class=\"singer-list\">\n      <div\n        class=\"list-item\"\n        v-for=\"(item, index) in singerRank.artists\"\n        :key=\"item.id\"\n        @click=\"handleShowSingerDetail(item.id)\"\n      >\n        <div class=\"item-left\">\n          <span class=\"left-index\" :class=\"index <= 2 ? 'top' : ''\">\n            {{ index + 1 }}\n          </span>\n          <span class=\"left-split\">-</span>\n          <span>{{ item.name }}</span>\n        </div>\n      </div>\n      <span class=\"more\" @click=\"handleShowMoreSinger\">\n        查看全部<i class=\"iconfont icon-right\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    singerRank: {\n      type: Object as PropType<SingerRank>,\n      default: () => ({}),\n    },\n  },\n  setup() {\n    const router = useRouter();\n\n    const handleShowSingerDetail = (id: number) => router.push(`/singer/${id}`);\n    const handleShowMoreSinger = () => router.push(\"/singer\");\n\n    return {\n      handleShowSingerDetail,\n      handleShowMoreSinger,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.singer {\n  display: flex;\n  margin-bottom: 20px;\n\n  .singer-cover {\n    position: relative;\n    width: 172px;\n    height: 172px;\n    cursor: pointer;\n    overflow: hidden;\n\n    .cover-filter {\n      width: 100%;\n      height: 100%;\n      filter: blur(2px);\n      border-radius: 4px;\n    }\n\n    .cover-time {\n      position: absolute;\n      bottom: 25%;\n      width: 100%;\n      text-align: center;\n      font-size: 12px;\n      color: #f1f2f3;\n      z-index: 2;\n    }\n\n    > img {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      border-radius: 4px;\n      opacity: 0.9;\n    }\n\n    .cover-decorate {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 36px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: $primary-color;\n      background: rgba(253, 253, 253, 0.6);\n      border-radius: 50%;\n      display: none;\n      z-index: 3;\n\n      .icon-play {\n        position: relative;\n        left: 3px;\n        font-size: 18px;\n      }\n    }\n\n    &:hover {\n      .cover-decorate {\n        display: block;\n      }\n    }\n  }\n\n  .singer-list {\n    flex: 1;\n    margin-left: 40px;\n\n    .list-item {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: 34px;\n      padding: 0 10px;\n      font-size: 12px;\n      color: #444;\n      border-radius: 4px;\n\n      &:nth-child(odd) {\n        background: #f8f8f8;\n      }\n\n      &:hover {\n        background: #f1f2f3;\n      }\n\n      .left-index {\n        font-size: 14px;\n        color: #999;\n\n        &.top {\n          color: $active-color;\n        }\n      }\n\n      .left-split {\n        margin: 0 10px;\n      }\n    }\n\n    .more {\n      height: 34px;\n      line-height: 34px;\n      padding: 0 10px;\n      font-size: 12px;\n      font-weight: 100;\n      cursor: pointer;\n\n      .iconfont {\n        font-size: 12px;\n      }\n    }\n  }\n}\n</style>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    singerRank: {\n      type: Object as PropType<SingerRank>,\n      default: () => ({}),\n    },\n  },\n  setup() {\n    const router = useRouter();\n\n    const handleShowSingerDetail = (id: number) => router.push(`/singer/${id}`);\n    const handleShowMoreSinger = () => router.push(\"/singer\");\n\n    return {\n      handleShowSingerDetail,\n      handleShowMoreSinger,\n    };\n  },\n});\n","import { render } from \"./SingerRank.vue?vue&type=template&id=4ccd60b0&scoped=true\"\nimport script from \"./SingerRank.vue?vue&type=script&lang=ts\"\nexport * from \"./SingerRank.vue?vue&type=script&lang=ts\"\n\nimport \"./SingerRank.vue?vue&type=style&index=0&id=4ccd60b0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4ccd60b0\"\n\nexport default script","<template>\n  <div class=\"global-item\" @click=\"handleShowDetail\">\n    <div class=\"global-top\">\n      <img :src=\"globalRank.coverImgUrl\" />\n      <div class=\"top-count\">\n        <i class=\"iconfont icon-playlist-play\" />\n        <span>{{ globalRank.playCount }}</span>\n      </div>\n      <div class=\"top-decorate\">\n        <i class=\"iconfont icon-play\" />\n      </div>\n    </div>\n    <p class=\"global-bottom\">{{ globalRank.name }}</p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    globalRank: {\n      type: Object as PropType<CommonRank>,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const router = useRouter();\n\n    const handleShowDetail = () => alert(\"歌单详情\");\n\n    return {\n      handleShowDetail,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.global-item {\n  flex: 0 0 18.4%;\n  margin-right: 2%;\n  margin-bottom: 20px;\n  cursor: pointer;\n\n  &:nth-of-type(5n) {\n    margin-right: 0;\n  }\n\n  .global-top {\n    position: relative;\n\n    > img {\n      width: 100%;\n    }\n\n    .top-count {\n      position: absolute;\n      top: 4px;\n      right: 8px;\n      font-size: 12px;\n      color: #fff;\n    }\n\n    .top-decorate {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 36px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: $primary-color;\n      background: rgba(253, 253, 253, 0.9);\n      border-radius: 50%;\n      display: none;\n      z-index: 3;\n\n      .icon-play {\n        position: relative;\n        left: 3px;\n        font-size: 18px;\n      }\n    }\n\n    &:hover {\n      .top-decorate {\n        display: block;\n      }\n    }\n  }\n  .global-bottom {\n    font-size: 14px;\n    line-height: 2;\n  }\n}\n</style>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  props: {\n    globalRank: {\n      type: Object as PropType<CommonRank>,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const router = useRouter();\n\n    const handleShowDetail = () => alert(\"歌单详情\");\n\n    return {\n      handleShowDetail,\n    };\n  },\n});\n","import { render } from \"./GlobalItem.vue?vue&type=template&id=102b9f7c&scoped=true\"\nimport script from \"./GlobalItem.vue?vue&type=script&lang=ts\"\nexport * from \"./GlobalItem.vue?vue&type=script&lang=ts\"\n\nimport \"./GlobalItem.vue?vue&type=style&index=0&id=102b9f7c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-102b9f7c\"\n\nexport default script","import { getRankSinger, getRankSongs } from \"./index\";\nimport { translateCount, formatDate } from \"@/utils/utils\";\nimport { AxiosResponse } from \"axios\";\n\nexport const convertRankSongs = (res: AxiosResponse) => {\n  const { playlist } = res.data;\n  if (!playlist) return [];\n\n  const songs = [];\n  const { tracks } = playlist;\n\n  for (const track of tracks) {\n    // 歌曲榜单取前五首\n    if (songs.length === 5) return songs;\n    songs.push({\n      id: track.id,\n      name: track.name,\n      picUrl: track.al.picUrl,\n      artists: track.ar.map((item) => ({ id: item.id, name: item.name })),\n      album: { id: track.al.id, name: track.al.name },\n      duration: track.dt,\n    });\n  }\n};\n\nexport const convertRankSinger = (res: AxiosResponse) => {\n  const { artists, updateTime } = res.data.list;\n  if (!artists || !updateTime) return;\n\n  const ars = [];\n  for (const artist of artists) {\n    // 歌手榜单取前五个\n    if (ars.length === 5) return { artists: ars, updateTime };\n\n    ars.push({\n      id: artist.id,\n      name: artist.name,\n      picUrl: artist.img1v1Url,\n    });\n  }\n};\n\nexport const convertRanksInfo = async (res: AxiosResponse) => {\n  const { list, artistToplist } = res.data;\n  if (!list) return [];\n\n  const commonRanksInfo = [];\n\n  for (let i = 0; i < list.length; i++) {\n    const item = list[i];\n    let songs = [];\n    let backgroundImgUrl = \"\";\n    // 前四项是官方榜单\n    if (i < 4) {\n      songs = await getRankSongs(item.id);\n      backgroundImgUrl = songs[0].picUrl;\n    }\n\n    commonRanksInfo.push({\n      id: item.id,\n      name: item.name,\n      coverImgUrl: item.coverImgUrl,\n      updateTime: formatDate(item.updateTime, \"MM月dd日\"),\n      playCount: translateCount(item.playCount),\n      songs,\n      backgroundImgUrl,\n    });\n  }\n\n  const { artists, updateTime } = await getRankSinger();\n\n  return {\n    officialRanks: commonRanksInfo.slice(0, 4),\n    globalRanks: commonRanksInfo.slice(4),\n    singerRank: {\n      coverImgUrl: artistToplist.coverUrl,\n      backgroundImgUrl: artists[0].picUrl,\n      updateTime: formatDate(updateTime, \"MM月dd日\"),\n      artists,\n    },\n  };\n};\n","import { getRequest } from \"../request\";\nimport {\n  convertRanksInfo,\n  convertRankSinger,\n  convertRankSongs,\n} from \"./convert\";\n\nconst REQUEST_URL = {\n  rankSongs: \"/playlist/detail\",\n  rankSinger: \"/toplist/artist\",\n  ranks: \"/toplist\",\n};\n\n// 获取排行榜前五的歌曲\nexport const getRankSongs = (id: number) => {\n  return getRequest(REQUEST_URL.rankSongs, { id }).then(convertRankSongs);\n};\n\nexport const getRankSinger = () => {\n  return getRequest(REQUEST_URL.rankSinger).then(convertRankSinger);\n};\n\nexport const getRanksInfo = () => {\n  return getRequest(REQUEST_URL.ranks).then(convertRanksInfo);\n};\n","\nimport { defineComponent, onMounted, reactive, ref, toRefs } from \"vue\";\n\nimport OfficialItem from \"./components/OfficialItem.vue\";\nimport SingerRank from \"./components/SingerRank.vue\";\nimport GlobalItem from \"./components/GlobalItem.vue\";\nimport { getRanksInfo } from \"@/api/rank/index\";\n\ninterface RankInfo {\n  officialRanks: CommonRank[];\n  globalRanks: CommonRank[];\n  singerRank: SingerRank;\n}\n\nexport default defineComponent({\n  components: {\n    OfficialItem,\n    SingerRank,\n    GlobalItem,\n  },\n  setup() {\n    const isLoading = ref<boolean>(false);\n\n    const rankData = reactive<RankInfo>({\n      officialRanks: [],\n      globalRanks: [],\n      // @ts-ignore\n      singerRank: {},\n    });\n\n    const init = async () => {\n      isLoading.value = true;\n\n      const { officialRanks, globalRanks, singerRank }: any =\n        await getRanksInfo();\n      rankData.officialRanks = officialRanks;\n      rankData.globalRanks = globalRanks;\n      rankData.singerRank = singerRank;\n\n      isLoading.value = false;\n    };\n\n    onMounted(() => init());\n\n    return {\n      isLoading,\n      ...toRefs(rankData),\n    };\n  },\n});\n","import { render } from \"./Index.vue?vue&type=template&id=264a68b6&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=ts\"\nexport * from \"./Index.vue?vue&type=script&lang=ts\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=264a68b6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-264a68b6\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OfficialItem.vue?vue&type=style&index=0&id=571a7058&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Index.vue?vue&type=style&index=0&id=264a68b6&lang=scss&scoped=true\""],"sourceRoot":""}