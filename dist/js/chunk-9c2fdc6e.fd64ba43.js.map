{"version":3,"sources":["webpack:///./src/views/highquality-list/Index.vue","webpack:///./src/views/highquality-list/Index.vue?5102","webpack:///./src/views/highquality-list/Index.vue?4840","webpack:///./src/store/modules/playlist.ts","webpack:///./src/api/playlist/convert.ts","webpack:///./src/api/playlist/index.ts","webpack:///./src/views/highquality-list/Index.vue?70a3"],"names":["class","handleQuestionClick","currentHighQuality","item","key","id","handleShowDetail","src","picUrl","alt","playCount","name","nickName","tag","copywriter","setup","router","playlist","value","length","push","open","render","__scopeId","Playlist","activeCategory","category","this","list","then","playlists","changeHighQuality","dynamic","namespaced","store","playlistStore","convertCategory","res","data","total","convertPlaylists","map","coverImgUrl","creator","nickname","pageCount","Math","floor","convertPlaylistDetail","trackIds","createTime","trackCount","subscribedCount","shareCount","commentCount","tags","description","userId","avatarUrl","ids","track","join","convertSongs","songs","song","al","alias","alia","artists","ar","album","sq","st","duration","dt","durationStr","mvId","mv","subDescription","split","slice","REQUEST_URL","hotCategory","allCategory","highQuality","detail","comment","songDetail","cat","currentPage","limit","offset","convertComment"],"mappings":"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","file":"js/chunk-9c2fdc6e.fd64ba43.js","sourcesContent":["<template>\n  <div class=\"high-quality\">\n    <div class=\"quality-header\">\n      <h1 class=\"sub-title\">精品歌单</h1>\n      <span class=\"question\" @click=\"handleQuestionClick\" />\n    </div>\n    <div class=\"quality-list\">\n      <div\n        class=\"list-item\"\n        v-for=\"item in currentHighQuality\"\n        :key=\"item.id\"\n        @click=\"handleShowDetail(item.id)\"\n      >\n        <div class=\"item-left\">\n          <img :src=\"item.picUrl\" alt=\"\" />\n          <i class=\"iconfont icon-choiceness-double\" />\n          <div class=\"left-count\">\n            <i class=\"iconfont icon-playlist-play\" />\n            <span>{{ item.playCount }}</span>\n          </div>\n          <div class=\"left-decorate\">\n            <i class=\"iconfont icon-play\" />\n          </div>\n        </div>\n        <div class=\"item-right\">\n          <h1 class=\"right-title\">{{ item.name }}</h1>\n          <div class=\"right-creator\">by {{ item.nickName }}</div>\n          <p class=\"right-desc\">\n            <span class=\"desc-tag\">{{ item.tag }}</span>\n            {{ item.copywriter }}\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { playlistStore } from \"@/store/modules/playlist\";\nimport { computed, defineComponent, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  setup() {\n    const router = useRouter();\n    const currentHighQuality = computed(() => playlistStore.currentHighQuality);\n\n    onMounted(() => {\n      if (!currentHighQuality.value.length) router.push(\"/playlist\");\n    });\n\n    const handleShowDetail = (id: number) => router.push(`/playlist/${id}`);\n    const handleQuestionClick = () =>\n      open(\"https://music.163.com/#/topic?id=202001\");\n\n    return {\n      currentHighQuality,\n      handleQuestionClick,\n      handleShowDetail,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.high-quality {\n  .quality-header {\n    display: flex;\n    align-items: center;\n    height: 50px;\n    line-height: 50px;\n\n    .sub-title {\n      font-size: 20px;\n      font-weight: bold;\n      cursor: pointer;\n      margin-right: 5px;\n    }\n    .question {\n      width: 15px;\n      height: 15px;\n      border: 2px solid #888;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n\n      &::after {\n        content: \"？\";\n        position: relative;\n        left: 3px;\n        font-size: 13px;\n        color: #888;\n      }\n    }\n  }\n\n  .quality-list {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n\n    .list-item {\n      flex: 0 0 32%;\n      display: flex;\n      align-items: center;\n      margin-right: 2%;\n      margin-bottom: 20px;\n      cursor: pointer;\n\n      &:nth-child(3n) {\n        margin-right: 0;\n      }\n\n      .item-left {\n        flex: 0 0 132px;\n        position: relative;\n        overflow: hidden;\n\n        > img {\n          width: 100%;\n        }\n\n        .icon-choiceness-double {\n          position: absolute;\n          top: 0;\n          left: 0;\n          color: #fff;\n          font-size: 18px;\n          transform: rotateZ(-45deg);\n          z-index: 1;\n        }\n\n        &::after {\n          content: \"\";\n          position: absolute;\n          top: 0;\n          left: 0;\n          border-color: #f3b068 transparent transparent #f3b068;\n          border-style: dashed;\n          border-width: 15px;\n          border-top-left-radius: 4px;\n        }\n\n        .left-count {\n          position: absolute;\n          top: 4px;\n          right: 8px;\n          font-size: 12px;\n          color: #fff;\n        }\n\n        .left-decorate {\n          position: absolute;\n          bottom: 0;\n          right: 0;\n          width: 28px;\n          height: 28px;\n          line-height: 28px;\n          text-align: center;\n          border-radius: 50%;\n          background: rgba(253, 253, 253, 0.9);\n          color: $primary-color;\n          transform: translate(-50%, -50%);\n          transition: opacity 0.3s ease-in-out;\n          opacity: 0;\n\n          .icon-play {\n            position: relative;\n            top: -1px;\n            left: 3px;\n            font-size: 13px;\n          }\n        }\n\n        &:hover {\n          .left-decorate {\n            opacity: 1;\n          }\n        }\n      }\n\n      .item-right {\n        margin-left: 10px;\n\n        .right-title {\n          font-size: 14px;\n          @include maxWidthEllipsis(180px);\n        }\n\n        .right-creator {\n          margin: 20px 0 30px 0;\n          font-size: 12px;\n          color: #999;\n        }\n\n        .right-desc {\n          font-size: 12px;\n          font-weight: 100;\n          color: #cfcfcf;\n          @include maxWidthEllipsis(180px);\n\n          .desc-tag {\n            display: inline-block;\n            color: $primary-color;\n            border: 1px solid $primary-color;\n            padding: 0 2px;\n            border-radius: 2px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","\nimport { playlistStore } from \"@/store/modules/playlist\";\nimport { computed, defineComponent, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  setup() {\n    const router = useRouter();\n    const currentHighQuality = computed(() => playlistStore.currentHighQuality);\n\n    onMounted(() => {\n      if (!currentHighQuality.value.length) router.push(\"/playlist\");\n    });\n\n    const handleShowDetail = (id: number) => router.push(`/playlist/${id}`);\n    const handleQuestionClick = () =>\n      open(\"https://music.163.com/#/topic?id=202001\");\n\n    return {\n      currentHighQuality,\n      handleQuestionClick,\n      handleShowDetail,\n    };\n  },\n});\n","import { render } from \"./Index.vue?vue&type=template&id=102d9b5e&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=ts\"\nexport * from \"./Index.vue?vue&type=script&lang=ts\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=102d9b5e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-102d9b5e\"\n\nexport default script","import {\n  VuexModule,\n  getModule,\n  Module,\n  Mutation,\n  Action,\n} from \"vuex-module-decorators\";\nimport { getHighQualityData } from \"@/api/playlist/index\";\nimport store from \"../index\";\n\n@Module({ dynamic: true, namespaced: true, name: \"playlist\", store })\nclass Playlist extends VuexModule {\n  // 当前选中分类\n  activeCategory = \"\";\n  @Mutation\n  changeActiveCategory(category: string) {\n    this.activeCategory = category;\n  }\n\n  // 当前精品歌单\n  currentHighQuality: PlayListItem[] = [];\n  @Mutation\n  changeHighQuality(list: PlayListItem[]) {\n    this.currentHighQuality = list;\n  }\n\n  /**\n   * 精品歌单不重要，异步加载\n   * @param category\n   */\n  @Action\n  getHighQualityList(category: string) {\n    getHighQualityData(category).then(({ playlists }) => {\n      this.changeHighQuality(playlists);\n    });\n  }\n}\n\nexport const playlistStore = getModule(Playlist);\n","import { formatDate, formatDuration, translateCount } from \"@/utils/utils\";\nimport { PLAYLIST_LIMIT } from \"@/utils/constant\";\nimport { AxiosResponse } from \"axios\";\nimport { getSongsData } from \"./index\";\n\nexport const convertCategory = (res: AxiosResponse) => {\n  return res.data;\n};\n\n// 转换歌单内容\nexport const convertPlaylists = (res: AxiosResponse) => {\n  const { playlists, total } = res.data;\n  const convertPlaylists: PlayListItem[] = playlists.map((list) => ({\n    id: list.id,\n    name: list.name,\n    picUrl: list.coverImgUrl,\n    playCount: translateCount(list.playCount),\n    nickName: list.creator.nickname,\n    copywriter: list.copywriter || \"\",\n    tag: list.tag || \"\",\n  }));\n\n  return {\n    playlists: convertPlaylists,\n    pageCount:\n      total % PLAYLIST_LIMIT\n        ? Math.floor(total / PLAYLIST_LIMIT) + 1\n        : total / PLAYLIST_LIMIT,\n  };\n};\n\nexport const convertPlaylistDetail = async (res: AxiosResponse) => {\n  const {\n    id,\n    name,\n    creator,\n    trackIds,\n    coverImgUrl,\n    createTime,\n    trackCount,\n    playCount,\n    subscribedCount,\n    shareCount,\n    commentCount,\n    tags,\n    description,\n  } = res.data.playlist;\n  const { userId, nickname, avatarUrl } = creator;\n  const ids = trackIds.map((track: any) => track.id).join(\",\");\n  const { data } = await getSongsData(ids);\n  const convertSongs = data.songs.map((song: any) => ({\n    id: song.id,\n    name: song.name,\n    picUrl: song.al.picUrl,\n    alias: song.alia.length ? song.alia.join(\"/\") : \"\",\n    artists: song.ar.map((item: Artist) => ({ id: item.id, name: item.name })),\n    album: { id: song.al.id, name: song.al.name },\n    sq: song.st === 0,\n    duration: song.dt,\n    durationStr: formatDuration(song.dt),\n    mvId: song.mv,\n  }));\n\n  return {\n    id,\n    name,\n    coverImgUrl,\n    userId,\n    nickname,\n    avatarUrl,\n    tags: tags.join(\" / \"),\n    songs: convertSongs,\n    trackCount,\n    commentCount,\n    playCount: translateCount(playCount),\n    subscribedCount: translateCount(subscribedCount),\n    shareCount: translateCount(shareCount),\n    createTime: formatDate(createTime, \"YYYY-MM-dd\"),\n    subDescription: description?.split(\"\\n\")[0] || \"\",\n    description: description?.split(\"\\n\").slice(1).join(\"<br/>\") || \"\",\n  };\n};\n","import { PLAYLIST_LIMIT, COMMENT_LIMIT } from \"@/utils/constant\";\nimport { convertComment } from \"../convertComment\";\nimport { getRequest } from \"../request\";\nimport {\n  convertCategory,\n  convertPlaylists,\n  convertPlaylistDetail,\n} from \"./convert\";\n\nconst REQUEST_URL = {\n  hotCategory: \"/playlist/hot\",\n  allCategory: \"/playlist/catlist\",\n  highQuality: \"/top/playlist/highquality\",\n  playlist: \"/top/playlist\",\n\n  detail: \"/playlist/detail\",\n  comment: \"/comment/playlist\",\n  songDetail: \"/song/detail\",\n};\n\nexport interface PlaylistDetail {\n  id: number;\n  name: string;\n  coverImgUrl: string;\n  userId: number;\n  nickname: string;\n  avatarUrl: string;\n  tags: string;\n  playCount: number | string;\n  subscribedCount: number | string;\n  shareCount: number | string;\n  trackCount: number;\n  commentCount: number;\n  createTime: string;\n  subDescription: string;\n  description: string;\n  songs: Song[];\n}\n\nexport const getHotCategoryData = () => {\n  return getRequest(REQUEST_URL.hotCategory).then(convertCategory);\n};\n\nexport const getAllCategoryData = () => {\n  return getRequest(REQUEST_URL.allCategory).then(convertCategory);\n};\n\nexport const getHighQualityData = (category: string) => {\n  return getRequest(REQUEST_URL.highQuality, { cat: category }).then(\n    convertPlaylists\n  );\n};\n\nexport const getPlaylistData = (category: string, currentPage: number) => {\n  return getRequest(REQUEST_URL.playlist, {\n    cat: category,\n    limit: PLAYLIST_LIMIT,\n    offset: (currentPage - 1) * COMMENT_LIMIT,\n  }).then(convertPlaylists);\n};\n\nexport const getPlaylistDetailData = (id: number) => {\n  return getRequest(REQUEST_URL.detail, { id }).then(convertPlaylistDetail);\n};\n\nexport const getPlaylistCommentData = (id: number, currentPage: number) => {\n  return getRequest(REQUEST_URL.comment, {\n    id,\n    limit: COMMENT_LIMIT,\n    offset: (currentPage - 1) * COMMENT_LIMIT,\n  }).then(convertComment);\n};\n\nexport const getSongsData = (ids: string) => {\n  return getRequest(REQUEST_URL.songDetail, { ids });\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Index.vue?vue&type=style&index=0&id=102d9b5e&lang=scss&scoped=true\""],"sourceRoot":""}